<!DOCTYPE html>
<html>
<head><link rel="stylesheet" href="/quantumjs/resources/quantum-docs.css"></link><link rel="stylesheet" href="/quantumjs/resources/quantum-html.css"></link><link rel="stylesheet" href="/quantumjs/resources/quantum-code-highlight.css"></link><link href="https://fonts.googleapis.com/css?family=Open+Sans:100,400,700|Roboto+Slab:300,400,700|Source+Code+Pro:200,400,700" rel="stylesheet"></link><link href="/quantumjs/resources/quantum-site.css" rel="stylesheet"></link><link rel="apple-touch-icon" sizes="57x57" href="/quantumjs/resources/favicons/apple-touch-icon-57x57.png"></link><link rel="apple-touch-icon" sizes="60x60" href="/quantumjs/resources/favicons/apple-touch-icon-60x60.png"></link><link rel="apple-touch-icon" sizes="72x72" href="/quantumjs/resources/favicons/apple-touch-icon-72x72.png"></link><link rel="apple-touch-icon" sizes="76x76" href="/quantumjs/resources/favicons/apple-touch-icon-76x76.png"></link><link rel="apple-touch-icon" sizes="114x114" href="/quantumjs/resources/favicons/apple-touch-icon-114x114.png"></link><link rel="apple-touch-icon" sizes="120x120" href="/quantumjs/resources/favicons/apple-touch-icon-120x120.png"></link><link rel="apple-touch-icon" sizes="144x144" href="/quantumjs/resources/favicons/apple-touch-icon-144x144.png"></link><link rel="apple-touch-icon" sizes="152x152" href="/quantumjs/resources/favicons/apple-touch-icon-152x152.png"></link><link rel="apple-touch-icon" sizes="180x180" href="/quantumjs/resources/favicons/apple-touch-icon-180x180.png"></link><meta name="apple-mobile-web-app-capable" content="yes"></meta><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"></meta><meta name="apple-mobile-web-app-title" content="Quantum JS"></meta><link rel="manifest" href="/quantumjs/resources/favicons/manifest.json"></link><meta name="mobile-web-app-capable" content="yes"></meta><meta name="theme-color" content="#fff"></meta><meta name="application-name" content="Quantum JS"></meta><link rel="icon type=image/png" sizes="228x228" href="/quantumjs/resources/favicons/coast-228x228.png"></link><link rel="yandex-tableau-widget" href="/quantumjs/resources/favicons/yandex-browser-manifest.json"></link><meta name="msapplication-TileColor" content="#fff"></meta><meta name="msapplication-TileImage" content="/mstile-144x144.png"></meta><link rel="icon type=image/png" sizes="32x32" href="/quantumjs/resources/favicons/favicon-32x32.png"></link><link rel="icon type=image/png" sizes="192x192" href="/quantumjs/resources/favicons/android-chrome-192x192.png"></link><link rel="icon type=image/png" sizes="16x16" href="/quantumjs/resources/favicons/favicon-16x16.png"></link><link rel="shortcut icon" href="/quantumjs/resources/favicons/favicon.ico"></link><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)" href="/quantumjs/resources/favicons/apple-touch-startup-image-320x460.png"></link><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)" href="/quantumjs/resources/favicons/apple-touch-startup-image-640x920.png"></link><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" href="/quantumjs/resources/favicons/apple-touch-startup-image-640x1096.png"></link><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" href="/quantumjs/resources/favicons/apple-touch-startup-image-750x1294.png"></link><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 3)" href="/quantumjs/resources/favicons/apple-touch-startup-image-1182x2208.png"></link><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 3)" href="/quantumjs/resources/favicons/apple-touch-startup-image-1242x2148.png"></link><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 1)" href="/quantumjs/resources/favicons/apple-touch-startup-image-748x1024.png"></link><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 1)" href="/quantumjs/resources/favicons/apple-touch-startup-image-768x1004.png"></link><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" href="/quantumjs/resources/favicons/apple-touch-startup-image-1496x2048.png"></link><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)" href="/quantumjs/resources/favicons/apple-touch-startup-image-1536x2008.png"></link><title>Creating a Blog</title><meta name="viewport" content="width=device-width, initial-scale=1"></meta></head>
<body class="qm-body-font qm-docs-sidebar-page"><div class="qm-docs-header"><div class="qm-docs-centered"><div class="qm-docs-header-wrapper"><a class="qm-docs-header-logo-link" href="/quantumjs/"><image class="qm-docs-header-logo" src="/quantumjs/resources/logo.svg"></image></a><div class="qm-docs-header-title qm-header-font">QuantumJS</div><div class="qm-docs-header-mobile-menu" id="nav.toggle.5F040AE00FBE1011F3B0F28550EFF941"><i class="qm-docs-header-mobile-menu-icon"></i></div><div class="qm-docs-header-links" id="nav.links.5F040AE00FBE1011F3B0F28550EFF941"></div></div></div></div><div class="qm-docs-sidebar-page"><div class="qm-docs-sidebar"><div class="qm-docs-navigation-menu-wrapper"><div class="qm-docs-navigation-menu"><a class="qm-docs-navigation-menu-page" href="/quantumjs/">Home</a><div class="qm-docs-navigation-menu-section"><div class="qm-docs-navigation-menu-section-title">Introduction</div><div class="qm-docs-navigation-menu-section-body"><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/">Overview</a><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/quick-start">Quick Start</a><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/markup/">The Markup Language</a><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/core-concepts/">Core Concepts</a><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/cli-and-api/">Using the CLI &#x2F; API</a><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/quantum-vs-markdown">Quantum vs Markdown</a></div></div><div class="qm-docs-navigation-menu-section"><div class="qm-docs-navigation-menu-section-title">Config</div><div class="qm-docs-navigation-menu-section-body"><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/quantum-config/">quantum.config.js</a></div></div><div class="qm-docs-navigation-menu-section"><div class="qm-docs-navigation-menu-section-title">Core Modules</div><div class="qm-docs-navigation-menu-section-body"><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/modules/quantum-js/">quantum-js</a><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/modules/quantum-dom/">quantum-dom</a><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/modules/quantum-html/">quantum-html</a></div></div><div class="qm-docs-navigation-menu-section"><div class="qm-docs-navigation-menu-section-title">Optional Modules</div><div class="qm-docs-navigation-menu-section-body"><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/modules/quantum-api/">quantum-api</a><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/modules/quantum-code-highlight/">quantum-code-highlight</a><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/modules/quantum-diagram/">quantum-diagram</a><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/modules/quantum-docs/">quantum-docs</a><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/modules/quantum-markdown/">quantum-markdown</a><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/modules/quantum-template/">quantum-template</a><a class="qm-docs-navigation-menu-page" href="/quantumjs/docs/modules/quantum-version/">quantum-version</a></div></div></div></div></div><div class="qm-docs-content-section-container"><div class="qm-docs-top-section"><div class="qm-docs-top-section-centered qm-docs-top-section-banner"><a class="qm-docs-top-section-source" href="https://github.com/ocadotechnology/quantumjs/tree/master/docs/src/pages/tutorials/creating-a-blog.um">Edit Page</a><div class="qm-docs-top-section-title qm-header-font">Creating a Blog</div><div class="qm-docs-top-section-description"><div class="qm-html-paragraph">Example of defining entity transforms for writing a blog </div></div></div></div><div class="qm-docs-content-section"><div class="qm-docs-topic"><div class="qm-docs-anchor" id="introduction"><div class="qm-docs-topic-header qm-header-font">Introduction<a class="qm-docs-anchor-icon" href="#introduction"></a></div></div><div class="qm-docs-topic-body"><div class="qm-html-paragraph">Quantum makes it easy to define how content is rendered using  <i>entityTransforms</i> . There are a couple of modules that already have entity transforms defined, which should cover many cases, however you may wish to define your own entityTransforms that convert quantum into html. This tutorial explores what a transform is, and how to define your own. </div></div></div><div class="qm-docs-topic"><div class="qm-docs-anchor" id="entity-transforms-vs-file-transform"><div class="qm-docs-topic-header qm-header-font">Entity transforms vs File transform<a class="qm-docs-anchor-icon" href="#entity-transforms-vs-file-transform"></a></div></div><div class="qm-docs-topic-body"><div class="qm-html-paragraph">An  <b>entity transform</b>  is a transform that converts an entity into a piece of html. </div><div class="qm-html-paragraph">A  <b>file transform</b>  is a transform that takes an entire page and reshapes it in some way. </div><div class="qm-html-paragraph">Entity transforms do the conversion from quantum objects into html, whereas pipeline transfomrs act on the quantum objects before they are converted into html. </div></div></div><div class="qm-docs-topic"><div class="qm-docs-anchor" id="structure-of-a-blog"><div class="qm-docs-topic-header qm-header-font">Structure of a blog<a class="qm-docs-anchor-icon" href="#structure-of-a-blog"></a></div></div><div class="qm-docs-topic-body"><div class="qm-html-paragraph">A blog is typically structured into posts, so it would make sense to have an entity for defining a post. Posts consist of content, tags, authors and maybe a date for when they were written. So perhaps we want our post entity to look like this: </div><div class="qm-html-paragraph"><div class="qm-code-highlight-codeblock language-um"><pre><code class="qm-code-font"><span class="hljs-keyword">@post<span class="hljs-attr"> Title</span></span>
  <span class="hljs-keyword">@author<span class="hljs-attr"> joe.bloggs</span></span>
  <span class="hljs-keyword">@date<span class="hljs-attr"> 05/12/2061</span></span>
  <span class="hljs-keyword">@tags<span class="hljs-attr"> tag1 tag2 tag3</span></span>
  <span class="hljs-keyword">@content</span>
    <span class="hljs-comment"># post content goes here</span></code></pre></div> </div></div></div><div class="qm-docs-topic"><div class="qm-docs-anchor" id="defining-an-entity-transform"><div class="qm-docs-topic-header qm-header-font">Defining an entity transform<a class="qm-docs-anchor-icon" href="#defining-an-entity-transform"></a></div></div><div class="qm-docs-topic-body"><div class="qm-html-paragraph">To contert something that looks like this into html, we need to define a entity transforms function: </div><div class="qm-html-paragraph"><div class="qm-code-highlight-codeblock language-js"><pre><code class="qm-code-font"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">post</span> (<span class="hljs-params">selection, transformer</span>) </span>{
  <span class="hljs-keyword">return</span> dom.create(<span class="hljs-string">'div'</span>).class(<span class="hljs-string">'post'</span>)
    .add(dom.create(<span class="hljs-string">'post-title'</span>).text(selection.ps()))
    .add(dom.create(<span class="hljs-string">'post-content'</span>)
      .add(selection.select(<span class="hljs-string">'content'</span>).transform(transformer)))
}</code></pre></div> </div><div class="qm-html-paragraph">This function takes an entity, and returns some virtual dom which represents that entity. This is all we have to do to get quantum rendering new entity types. </div><div class="qm-html-paragraph">All that is left now is to tell quantum to use this function. To do this we need to export the function: </div><div class="qm-html-paragraph"><div class="qm-docs-subsection"><div class="qm-docs-subsection-header qm-header-font">blog-transforms.js</div><div class="qm-docs-subsection-body"><div class="qm-html-paragraph"><div class="qm-code-highlight-codeblock language-js"><pre><code class="qm-code-font"><span class="hljs-keyword">const</span> dom = <span class="hljs-built_in">require</span>(<span class="hljs-string">'quantum-dom'</span>)

exports.entityTransforms = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">post</span> (<span class="hljs-params">selection, transformer</span>) </span>{
    <span class="hljs-keyword">return</span> dom.create(<span class="hljs-string">'div'</span>).class(<span class="hljs-string">'post'</span>)
      .add(dom.create(<span class="hljs-string">'post-title'</span>).text(selection.ps()))
      .add(dom.create(<span class="hljs-string">'post-content'</span>)
        .add(selection.select(<span class="hljs-string">'content'</span>).transform(transformer)))
  }

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">post</span>: post
  }
}</code></pre></div> </div></div></div> </div><div class="qm-html-paragraph">Now we can set up quantum to use our new blog transform: </div><div class="qm-html-paragraph"><div class="qm-docs-subsection"><div class="qm-docs-subsection-header qm-header-font">quantum.config.js</div><div class="qm-docs-subsection-body"><div class="qm-html-paragraph"><div class="qm-code-highlight-codeblock language-js"><pre><code class="qm-code-font"><span class="hljs-keyword">const</span> html = <span class="hljs-built_in">require</span>(<span class="hljs-string">'quantum-html'</span>)
<span class="hljs-keyword">const</span> blog = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./blog-transforms'</span>)

<span class="hljs-keyword">const</span> htmlOptions = {
  <span class="hljs-attr">entityTransforms</span>: {
    <span class="hljs-attr">html</span>: html.entityTransforms(),
    <span class="hljs-attr">blog</span>: blog.entityTransforms()
  }
}

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">pipeline</span>: [
    html(htmlOptions)
  ],
  <span class="hljs-attr">files</span>: <span class="hljs-string">'**/*.um'</span>
}</code></pre></div> </div></div></div> </div><div class="qm-html-paragraph">Any time quantum comes across a  <code class="qm-code-highlight-code qm-code-font">@blog</code>  entity, it will now use the transform we just defined. </div></div></div></div></div></div><script src="/quantumjs/resources/quantum-docs.js"></script><script>window.quantum.docs.createHeaderToggle("5F040AE00FBE1011F3B0F28550EFF941");</script></body></html>